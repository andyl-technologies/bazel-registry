--- cc.nix.orig
+++ cc.nix
@@ -244,8 +244,10 @@
     LINK_FLAGS=(
       $(
         if [[ -x ${cc}/bin/ld.gold ]]; then echo -fuse-ld=gold; fi
-        add_linker_option_if_supported -Wl,-no-as-needed -no-as-needed
-        add_linker_option_if_supported -Wl,-z,relro,-z,now -z
+        ${if !stdenv.isDarwin then ''
+        add_linker_option_if_supported -Wl,-no-as-needed -no-as-needed
+        add_linker_option_if_supported -Wl,-z,relro,-z,now -z
+        '' else ""}
       )
       ${
         if stdenv.isDarwin then "-undefined dynamic_lookup -headerpad_max_install_names" else "-B${cc}/bin"
